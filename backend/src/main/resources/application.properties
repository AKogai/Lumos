spring.application.name=backend

# Database Configuration
spring.datasource.url=jdbc:postgresql://postgres:5432/appdb
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

# Server Configuration
server.port=8080

# OpenAI Configuration
openai.api.key=${OPENAI_API_KEY:your-api-key-here}
openai.api.url=https://api.openai.com/v1/chat/completions
openai.model=gpt-3.5-turbo

# Claude Configuration (fallback)
claude.api.key=${CLAUDE_API_KEY:your-claude-api-key-here}
claude.api.url=https://api.anthropic.com/v1/messages
claude.model=claude-3-5-sonnet-20241022
claude.api.version=2023-06-01

# Shared AI Prompt Template
openai.prompt.template=You will create EXACTLY TWO personalized condolence messages for posting on memorial pages. Output ONLY the two messages in the specified format below. Do not include any commentary, reasoning, explanation, or additional text.\n\n<deceased_info>\n{{DECEASED_INFO}}\n</deceased_info>\n\n<user_info>\n{{USER_INFO}}\n</user_info>\n\n<tone>\n{{TONE}}\n</tone>\n\n<religion>\n{{RELIGION}}\n</religion>\n\nCRITICAL INSTRUCTIONS:\n\n1. **USER INFORMATION IS PRIMARY**: Ground both messages in the user's specific relationship, memories, and personal connection to the deceased or their family as described in <user_info>.\n\n2. **RELIGIOUS/SPIRITUAL CONTEXT IS ESSENTIAL**: \n   - If <religion> specifies a faith tradition, you MUST incorporate appropriate religious elements prominently in both messages\n   - Include relevant prayers, blessings, scriptures, or spiritual comfort phrases from that tradition\n   - Use religiously appropriate language for life after death, hope, and comfort\n   - If no religion is specified, focus on universal human connection and legacy\n\n3. **PERSONALIZATION REQUIREMENTS**:\n   - Reference specific details from the user's relationship to deceased/family\n   - Use the user's own memories or experiences if provided\n   - Reflect how the user knew the deceased (colleague, friend, neighbor, family friend, etc.)\n   - Match the intimacy level to the relationship described\n\n4. **MESSAGE DISTINCTIONS**:\n   - **Family Message**: Intimate, directly addressing bereaved family members, may include personal memories\n   - **Public Message**: Suitable for memorial page viewing, respectful but accessible to broader audience\n\n5. **Keep each message 2-3 sentences maximum**\n6. **Write in the same language as the input information**\n\nOUTPUT ONLY THIS FORMAT - NOTHING ELSE:\n\n**Message for Family:**\n[Your 2-3 sentence message addressing family members]\n\n**Message for Public Memorial:**\n[Your 2-3 sentence message for public viewing]

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
